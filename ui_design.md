# 旅行时间计划应用UI设计文档

## 设计原则

本应用采用Material Design 3设计语言，结合Android 12+的莫奈(Material You)动态颜色系统，打造现代、个性化且易用的用户界面。设计遵循以下原则：

1. **用户中心设计**：所有界面和交互以用户需求为中心，确保直观易用
2. **动态颜色系统**：利用莫奈颜色系统，从用户壁纸提取颜色，实现个性化主题
3. **一致性**：保持视觉和交互的一致性，降低学习成本
4. **可访问性**：确保足够的对比度和适当的字体大小，适合各类用户
5. **响应式布局**：适应不同屏幕尺寸和方向的设备
6. **高度自定义**：支持用户自定义UI元素的位置、形状、颜色和背景

## 颜色系统

应用将使用Material You的动态颜色系统，主要包括：

1. **主色调(Primary)**：从用户壁纸提取的主要颜色，用于重点UI元素
   - Primary
   - On Primary（在主色上的文本/图标颜色）
   - Primary Container（主色容器）
   - On Primary Container（在主色容器上的文本/图标颜色）

2. **次要色调(Secondary)**：用于次要UI元素和强调
   - Secondary
   - On Secondary
   - Secondary Container
   - On Secondary Container

3. **第三色调(Tertiary)**：用于平衡和视觉层次
   - Tertiary
   - On Tertiary
   - Tertiary Container
   - On Tertiary Container

4. **错误色调(Error)**：用于错误状态和警告
   - Error
   - On Error
   - Error Container
   - On Error Container

5. **中性色调**：用于背景和表面
   - Background
   - On Background
   - Surface
   - On Surface
   - Surface Variant
   - On Surface Variant
   - Outline

6. **自定义状态颜色**：用于活动状态显示
   - 绿色（活动状态-远离车站）
   - 红色（活动状态-接近车站）
   - 黄色（上车提醒状态）
   - 黑色（下车提醒状态）

## 主要界面设计

### 1. 主界面（MainActivity）

主界面采用底部导航栏设计，包含以下主要部分：

- **顶部应用栏**：显示应用名称和设置按钮
- **中央内容区**：根据底部导航显示不同内容
- **底部导航栏**：包含四个主要导航项
  - 车票信息
  - 地图路线
  - 闹钟管理
  - 设置

设计特点：
- 圆角卡片设计
- 动态颜色应用于导航栏和主要UI元素
- 简洁明了的图标和文字标签
- 平滑的导航过渡动画

### 2. 车票信息录入界面（TicketInputFragment）

采用表单式设计，包含以下元素：

- **日期时间选择器**：用于选择发车和停车时间
- **地址输入框**：用于输入车站位置
- **地图选点按钮**：允许在地图上选择车站位置
- **保存按钮**：保存车票信息

设计特点：
- 浮动标签输入框
- 日期时间选择器使用Material Design 3风格
- 表单验证和错误提示
- 保存按钮使用主色调强调

### 3. 地图和路线界面（MapFragment）

地图界面设计包含：

- **地图视图**：显示当前位置、车站位置和路线
- **交通方式选择器**：显示可用交通方式选项
- **路线信息卡片**：显示距离、预计用时和详细路线
- **实时状态指示器**：显示当前活动状态和提示

设计特点：
- 全屏地图视图
- 半透明控制面板
- 交通方式图标使用Material图标
- 状态指示器使用动态颜色系统

### 4. 闹钟管理界面（AlarmFragment）

闹钟界面设计包含：

- **闹钟列表**：显示已设置的出发、上车和下车闹钟
- **闹钟详情卡片**：显示每个闹钟的详细信息和状态
- **闹钟编辑按钮**：允许调整闹钟设置
- **闹钟开关**：启用/禁用特定闹钟

设计特点：
- 卡片式列表设计
- 每种闹钟类型使用不同颜色标识
- 开关使用Material Design 3风格
- 时间显示使用大字体强调

### 5. 设置界面（SettingsFragment）

设置界面采用分类列表设计，包含：

- **地图设置**：选择地图API提供商
- **时间设置**：调整空余时间和提醒时间
- **交通设置**：设置默认交通方式和选项
- **提醒设置**：自定义提示内容和闹钟铃声
- **界面设置**：自定义UI元素位置、形状、颜色和背景
- **关于应用**：显示应用版本和信息

设计特点：
- 分类标题使用次要色调
- 开关和滑块使用Material Design 3组件
- 颜色选择器使用动态颜色系统
- 自定义选项使用直观的预览效果

## UI组件设计

### 1. 卡片设计

应用中的卡片组件采用以下设计：
- 圆角：16dp
- 阴影：2dp-8dp（根据层级）
- 内边距：16dp
- 背景：Surface颜色
- 边框：轻微描边（在某些状态下）

### 2. 按钮设计

应用中的按钮分为三种类型：
- **填充按钮**：用于主要操作，使用Primary颜色
- **轮廓按钮**：用于次要操作，使用Primary颜色的轮廓
- **文本按钮**：用于辅助操作，仅使用文本颜色

所有按钮具有以下特性：
- 圆角：24dp
- 内边距：水平16dp，垂直8dp
- 点击效果：水波纹动画
- 状态变化：禁用状态透明度降低

### 3. 输入框设计

输入框采用填充式设计：
- 圆角：8dp
- 浮动标签：动画过渡
- 辅助文本：提供额外信息或错误提示
- 前缀/后缀图标：提供额外功能或清除输入

### 4. 列表项设计

列表项采用简洁设计：
- 高度：64dp（单行）或72dp（双行）
- 前导图标：使用24dp图标
- 文本：主标题16sp，副标题14sp
- 尾随控件：开关、复选框或箭头图标

### 5. 对话框设计

对话框采用居中弹出设计：
- 圆角：28dp
- 标题：20sp，加粗
- 内容：16sp，常规
- 按钮：文本按钮，右对齐
- 背景：半透明遮罩

### 6. 底部表单设计

用于复杂操作的底部表单：
- 圆角顶部：16dp
- 拖动手柄：居中小条
- 最大高度：屏幕高度的80%
- 滚动行为：内容可滚动，表单固定

## 自定义UI功能设计

为满足高度自定义需求，应用将提供以下UI自定义功能：

### 1. 元素位置自定义

- **拖拽功能**：允许用户长按并拖动UI元素到新位置
- **网格对齐**：提供可选的网格对齐辅助
- **位置重置**：一键恢复默认位置
- **位置锁定**：防止意外移动

### 2. 形状自定义

- **形状选择器**：提供多种预设形状（圆角矩形、圆形、胶囊形等）
- **圆角调整**：允许调整圆角大小
- **形状预览**：实时预览形状变化效果

### 3. 颜色自定义

- **颜色选择器**：提供色轮和调色板
- **透明度调整**：允许调整颜色透明度
- **预设主题**：提供多种预设颜色主题
- **从图像提取**：允许从图像提取颜色

### 4. 背景自定义

- **背景类型**：纯色、渐变、图案或图像
- **模糊效果**：允许添加背景模糊效果
- **暗色模式适应**：自动调整背景以适应暗色模式

## 响应式设计

应用将采用约束布局和百分比尺寸，确保在不同屏幕尺寸和方向上的良好表现：

- **手机竖屏**：标准布局，底部导航
- **手机横屏**：优化空间利用，可选侧边导航
- **平板设备**：双面板布局，增强信息密度
- **折叠屏**：适应折叠状态变化

## 可访问性设计

为确保应用对所有用户友好，设计将考虑以下可访问性因素：

- **对比度**：确保文本和背景之间有足够对比度
- **字体大小**：支持系统字体大小调整
- **触摸目标**：确保交互元素有足够大的触摸区域（至少48dp）
- **内容描述**：为所有图像和图标提供内容描述
- **无障碍服务兼容**：确保与TalkBack等无障碍服务兼容

## 动画和过渡

应用将使用以下动画增强用户体验：

- **页面过渡**：共享元素过渡和淡入淡出效果
- **列表动画**：项目添加和删除的动画
- **状态变化**：平滑的状态指示器变化
- **加载动画**：使用Material Design加载指示器
- **按钮反馈**：点击和状态变化的视觉反馈

## 暗色模式支持

应用将完全支持暗色模式：

- **自动切换**：跟随系统暗色模式设置
- **手动控制**：允许用户手动选择明暗模式
- **颜色适应**：所有UI元素自动适应暗色模式
- **图标适应**：确保图标在暗色模式下可见
